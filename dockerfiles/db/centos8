FROM basecentos8

ARG DB_TYPE
ARG DB_VERSION
ARG REPO_USERNAME
ARG REPO_PASSWORD
ARG DBPORT
ARG DATABASE_USER
ARG DATABASE_NAME

ENV DATABASE_TYPE $DB_TYPE
ENV DATABASE_VERSION $DB_VERSION
ENV DBPORT $DBPORT
ENV DATABASE_USER $DATABASE_USER
ENV DATABASE_NAME $DATABASE_NAME

ADD scripts/installation/ /tmp
ADD scripts/setup/ /tmp

RUN chmod u+x /tmp/db.sh /tmp/launcher.sh
RUN /tmp/db.sh centos8 $REPO_USERNAME $REPO_PASSWORD

ENTRYPOINT /tmp/launcher.sh
FROM centos:7
ARG DB_VERSION
ARG REPO_USERNAME
ARG REPO_PASSWORD

ENV DB_VERSION $DB_VERSION

ADD scripts/installation/db.sh /tmp
ADD scripts/setup/createprimary.sh /tmp
ADD scripts/setup/createstandby.sh /tmp
ADD scripts/setup/dbutils.sh /tmp
ADD scripts/setup/settings.sh /tmp
ADD scripts/setup/launcher.sh /tmp

RUN chmod u+x /tmp/db.sh /tmp/launcher.sh
RUN /tmp/db.sh epas $DB_VERSION centos7 $REPO_USERNAME $REPO_PASSWORD

ENTRYPOINT /tmp/launcher.sh